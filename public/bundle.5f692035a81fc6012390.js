(()=>{"use strict";function e(e){return e.length>=10}function t(e,t){const n=document.createElement("div");n.classList.add("overlay"),document.body.append(n);const s=n.appendChild(document.createElement("div"));s.classList.add("modal"),document.body.classList.add("no-scroll");const a=`\n    <h1>${e}</h1>\n    <div class="modal-content">${t}</div>\n    `;s.innerHTML=a}class n{static create(e){return fetch("https://ask-me-a-queastions-app-default-rtdb.firebaseio.com/questions.json",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"}}).then((e=>e.json())).then((t=>(e.id=t.name,e))).then(s).then(n.renderList)}static renderList(){const e=a(),t=e.length?e.map(o).join(""):'<div class="/">You didn\'t ask anything</div>';document.getElementById("list").innerHTML=t}static fetch(e){return e?fetch(`https://ask-me-a-question-app-default-rtdb.asia-southeast1.firebasedatabase.app/questions.json?auth=${e}`).then((e=>e.json())).then((e=>e&&e.error?`<p class="error">${e.error}</p>`:e?Object.keys(e).map((t=>({...e[t],id:t}))):[])):Promise.resolve('<p class="error">У Вас нет авторизации</p>')}static listToHTML(e){return e.length?`<ol>${e.map((e=>`<li>${e.text}</li>`)).join("")}</ol>`:"<p>Вопросов пока нет</p>"}}function s(e){const t=a();t.push(e),localStorage.setItem("questions",JSON.stringify(t))}function a(){return JSON.parse(localStorage.getItem("questions")||"[]")}function o(e){return`\n    <div class="/">\n    ${new Date(e.date).toLocaleDateString()}\n    ${new Date(e.date).toLocaleTimeString()}\n    </div>\n    <div>${e.text}</div>\n    <br>`}const i=document.getElementById("form"),r=i.querySelector("#question-input"),d=i.querySelector("#submit"),l=document.getElementById("modal-btn"),c=document.querySelector(".askme");function u(e){e.preventDefault();const t=e.target.querySelector("button"),s=e.target.querySelector("#email").value,a=e.target.querySelector("#password").value;t.disabled=!0,function(e,t){return fetch("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDVQZK9VtMD_ni0YE_aR7RLwtPKqLBEJIMs",{method:"POST",body:JSON.stringify({email:e,password:t,returnSeсureToken:!0}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>e.idToken))}(s,a).then(n.fetch).then(m).then((()=>t.disabled=!1))}function m(e){"string"==typeof e?t("Ошибка!",e):t("Список вопросов:",n.listToHTML(e))}l.addEventListener("click",(()=>{l.classList.add("allBtnFocus")})),l.addEventListener("mouseout",(()=>{l.classList.remove("allBtnFocus")})),r.addEventListener("click",(()=>{c.classList.add("askmeHover")})),i.addEventListener("submit",(function(t){if(t.preventDefault(),e(r.value)){const e={text:r.value.trim(),date:(new Date).toJSON()};d.disabled=!0,setTimeout((()=>{n.create(e),setTimeout((()=>{r.value="",d.disabled=!1,c.classList.remove("askmeHover")}),2e3)}),2e3)}})),r.addEventListener("input",(()=>{d.disabled=!e(r.value)})),window.addEventListener("load",n.renderList),l.addEventListener("click",(function(){t("Autorization",'\n        <form class="" id="auth-form">\n\n            <div class="form">\n              <input type="email" id="email" class="input modal-form" required>\n              <label for="email">Email</label>\n\n              <input type="password" id="password" class="input modal-form" required>\n              <label for="password">Password</label>\n            </div>\n\n            <button type="submit" id="auth-button" class="submitBtn">\n              Sign in\n            </button>\n        </form>\n    '),document.getElementById("auth-form").addEventListener("submit",u,{once:!0})}))})();